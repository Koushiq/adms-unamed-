CREATE TABLE VIRTUALWALLET (
  USERNAME VARCHAR2(20),
  BALANCE NUMBER(7,2),
  PRIMARY KEY (USERNAME)
);

CREATE TABLE CARTITEMS (
  CARTID NUMBER(10),
  BOOKID NUMBER(10),
  CARTITEMADDEDAT TIMESTAMP(2),
  CARTITEMADDEDBY VARCHAR2(20),
  PRIMARY KEY (CARTID),
  FOREIGN KEY (BOOKID) REFERENCES BOOKS(BOOKID),
  FOREIGN KEY (CARTITEMADDEDBY) REFERENCES USERS(USERNAME)    
);

CREATE TABLE VIRTUALWALLETENTRIES (
  VWID NUMBER(10),
  USERNAME VARCHAR2(20),
  REQUESTEDAMOUNT NUMBER(7,2),
  REQUESTSTATUS VARCHAR2(20),
  VWACTIONBY VARCHAR2(20),
  VWACTIONAT TIMESTAMP(2),
  PRIMARY KEY (VWID),
  FOREIGN KEY (USERNAME) REFERENCES USERS(USERNAME),
  FOREIGN KEY (VWACTIONBY) REFERENCES USERS(USERNAME)
);

CREATE TABLE CHECKOUT (
  CHECKOUTID NUMBER(10),
  BOOKID NUMBER(10),
  CHECKOUTBY VARCHAR2(20),
  CHECKOUTAT TIMESTAMP(2),
  PRIMARY KEY (CHECKOUTID),
  FOREIGN KEY (BOOKID) REFERENCES BOOKS(BOOKID),
  FOREIGN KEY (CHECKOUTBY) REFERENCES USERS(USERNAME) 
);

CREATE TABLE RECOMMENDATIONLIST (
  RID NUMBER(10),
  BOOKID NUMBER(10),
  RBY VARCHAR2(20),
  RAT TIMESTAMP(2),
  RTYPE VARCHAR2(20),
  PRIMARY KEY (RID),
  FOREIGN KEY (RBY) REFERENCES USERS(USERNAME),
  FOREIGN KEY (BOOKID) REFERENCES BOOKS(BOOKID)
);

CREATE TABLE BOOKS (
  BOOKID NUMBER(10),
  BOOKCODE NUMBER(10),
  TITLE VARCHAR2(20),
  AUTHOR VARCHAR2(20),
  PRICE NUMBER(10),
  PAGECOUNT NUMBER(10),
  PICTUREPATH VARCHAR2(20),
  BOOKADDEDAT TIMESTAMP(2),
  BOOKADDEDBY VARCHAR2(20),
  SOLDSTATUS VARCHAR2(20),
  PRIMARY KEY (BOOKID)
);

CREATE TABLE USERS (
  USERNAME VARCHAR2(20),
  USERTYPE VARCHAR2(20),
  FIRSTNAME VARCHAR2(20),
  LASTNAME VARCHAR2(20),
  PASSWORD VARCHAR2(20),
  REGISTERDATE TIMESTAMP(2),
  STATUS VARCHAR2(10),
  ACTIONBY VARCHAR2(20),
  ACTIONAT TIMESTAMP(2),
  PRIMARY KEY (USERNAME)
);

