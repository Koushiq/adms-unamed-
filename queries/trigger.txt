CREATE or REPLACE trigger vw_trigger
BEFORE INSERT OR DELETE OR UPDATE ON USERS
FOR EACH ROW
ENABLE 
BEGIN
  IF INSERTING THEN
    INSERT INTO VIRTUALWALLET (USERNAME,BALANCE) VALUES (:NEW.USERNAME,0);  
  ELSIF DELETING THEN
    DELETE FROM VIRTUALWALLET WHERE USERNAME =:old.USERNAME; 
  ELSIF UPDATING THEN
    UPDATE VIRTUALWALLET 
    SET USERNAME =:new.USERNAME WHERE USERNAME =:old.USERNAME;
  END IF;
END;


CREATE or REPLACE trigger vwe_trigger
BEFORE INSERT OR DELETE OR UPDATE ON VIRTUALWALLETENTRIES
FOR EACH ROW
ENABLE 
BEGIN
  IF INSERTING THEN    
    UPDATE VIRTUALWALLET 
    SET BALANCE =(BALANCE+:new.REQUESTEDAMOUNT) WHERE USERNAME =:new.USERNAME;
  END IF;
END;

